<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyperion Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .widget {
            border: 1px solid #ccc;
            padding: 20px;
            margin: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <header>
        <h1>Hyperion Dashboard</h1>
    </header>
    <main>
        <div class="widget">
            <h3>CPU Usage</h3>
            <canvas id="cpuChart"></canvas>
        </div>
        <div class="widget">
            <h3>Memory Usage</h3>
            <canvas id="memoryChart"></canvas>
        </div>
        <div class="widget">
            <h3>Network Usage</h3>
            <canvas id="networkChart"></canvas>
        </div>
    </main>
    <script id="cpu-data" type="application/json">{{ cpu_usage|safe }}</script>
    <script id="memory-data" type="application/json">{{ memory_usage|safe }}</script>
    <script id="network-data" type="application/json">{{ network_usage|safe }}</script>
    <script>
        const cpuData = JSON.parse(document.getElementById('cpu-data').textContent);
        const memoryData = JSON.parse(document.getElementById('memory-data').textContent);
        const networkData = JSON.parse(document.getElementById('network-data').textContent);

        const cpuChartCtx = document.getElementById('cpuChart').getContext('2d');
        const memoryChartCtx = document.getElementById('memoryChart').getContext('2d');
        const networkChartCtx = document.getElementById('networkChart').getContext('2d');

        new Chart(cpuChartCtx, {
            type: 'line',
            data: {
                labels: cpuData.map(d => d.recorded_at),
                datasets: [{
                    label: 'CPU Usage',
                    data: cpuData.map(d => d.usage),
                    borderColor: 'rgba(75, 192, 192, 1)',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    fill: false,
                }]
            }
        });

        new Chart(memoryChartCtx, {
            type: 'line',
            data: {
                labels: memoryData.map(d => d.recorded_at),
                datasets: [{
                    label: 'Memory Usage',
                    data: memoryData.map(d => d.usage),
                    borderColor: 'rgba(153, 102, 255, 1)',
                    backgroundColor: 'rgba(153, 102, 255, 0.2)',
                    fill: false,
                }]
            }
        });

        new Chart(networkChartCtx, {
            type: 'line',
            data: {
                labels: networkData.map(d => d.recorded_at),
                datasets: [{
                    label: 'Received',
                    data: networkData.map(d => d.received),
                    borderColor: 'rgba(255, 99, 132, 1)',
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    fill: false,
                }, {
                    label: 'Sent',
                    data: networkData.map(d => d.sent),
                    borderColor: 'rgba(54, 162, 235, 1)',
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    fill: false,
                }]
            }
        });
    </script>
</body>
</html>